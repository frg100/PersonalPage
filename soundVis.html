<html>

<head>
  <meta charset='UTF-8'>
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Main CSS -->
  <link href='./assets/css/sound-vis.css' rel='stylesheet'>

  <!-- Font Awesome CSS -->
  <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.2.0/css/all.css" integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ" crossorigin="anonymous">
  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.1.3/css/bootstrap.min.css" integrity="sha384-MCw98/SFnGE8fJT3GXwEOngsV7Zt27NXFoaoApmYm81iuXoPkFOJwJ8ERdknLPMO" crossorigin="anonymous">

  <!-- Scripts -->
  <script>
    function authenticate(){
      console.log("Authenticating...");
      const clientId = "689648aff5394a4b8eee2c43fd508311";
      const redirectUri = "https:%2F%2Fweb.stanford.edu%2F~frg100%2FsoundVis";
      const scopes = "user-read-private%20user-read-email";
      const authUrl = `https://accounts.spotify.com/authorize?client_id=${clientId}&redirect_uri=${redirectUri}&scope=${scopes}&response_type=token&state=123`;
      console.log(authUrl);
      window.location.replace(authUrl);
    }

    var hash_value = window.location.hash.replace('#', '');
    const regexMatch = window.location.hash.match(/=.*&token/g)[0];
    const accessToken = regexMatch.substring(1, regexMatch.length-6);
 
    //show the value with an alert pop-up
    alert(`accessToken: ${accessToken}`);

  </script>

  <title> SoundVis </title>
</head>

<body>
  <div class="login">
    <h1>First, log in to spotify</h1>
    <button class="btn btn-primary" onclick='authenticate()'>Log in</button>
  </div>
</body>
</html>